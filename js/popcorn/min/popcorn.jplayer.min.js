!function(e){var t="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js",n="http://www.jplayer.org/2.4.0/js/jquery.jplayer.min.js",i="http://www.jplayer.org/2.4.0/js/Jplayer.swf",r="html,flash",o=!1,a=!1,s=!1,l={mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},u=function(e){return e&&"object"==typeof e&&e.hasOwnProperty?!0:!1},c=function(e){var t=!1;return/\.mp3$/i.test(e)?t="mp3":/\.mp4$/i.test(e)||/\.m4v$/i.test(e)?t="m4v":/\.m4a$/i.test(e)?t="m4a":/\.ogg$/i.test(e)||/\.oga$/i.test(e)?t="oga":/\.ogv$/i.test(e)?t="ogv":/\.webm$/i.test(e)&&(t="webmv"),t},d=function(e){var t="",n="";if(u(e))for(var i in e)e.hasOwnProperty(i)&&(t+=n+i,n=",");return o&&console.log('getSupplied(): Generated: supplied = "'+t+'"'),t};e.player("jplayer",{_canPlayType:function(e,t){var n,i=e.toLowerCase(),o={media:{},options:{}},a=!1;if("video"!==i&&"audio"!==i&&("string"==typeof t?/^http.*/i.test(t)&&(n=c(t),n&&(o.media[n]=t,o.options.solution=r,o.options.supplied=n)):o=t,u(o)&&u(o.media))){u(o.options)||(o.options={}),o.options.solution||(o.options.solution=r),o.options.supplied||(o.options.supplied=d(o.media));for(var s=o.options.solution.toLowerCase().split(","),p=o.options.supplied.toLowerCase().split(","),f=0;f<s.length;f++)for(var h,m=s[f].replace(/^\s+|\s+$/g,""),v="html"===m,g="flash"===m,y=0;y<p.length;y++)if(n=p[y].replace(/^\s+|\s+$/g,""),l[n]){!h&&v&&(h=document.createElement(l[n].media));var b=!!(h&&h.canPlayType&&h.canPlayType(l[n].codec)),x=b&&v,w=l[n].flashCanPlay&&g;(x||w)&&(a={html:x,type:n},f=s.length,y=p.length)}}return a},_setup:function(){var l,p,f=this,h="unknown",m={},v={},g=!1,y=0,b=null,x=!1,w=null,C=function(){g?(o&&console.log("Dispatched event : durationchange : "+y),f.dispatchEvent("durationchange")):(o&&console.log("DELAYED EVENT (!ready) : durationchange : "+y),clearTimeout(b),b=setTimeout(C,250))},j=function(){var e=function(e){e.jPlayer.status.duration!==y&&(y=e.jPlayer.status.duration,C())},t=function(e){x||100!==e.jPlayer.status.seekPercent||(x=!0,setTimeout(function(){o&&console.log("Trigger : canplaythrough"),p._trigger($.jPlayer.event.canplaythrough)},0))};l.bind($.jPlayer.event.loadstart,function(){setTimeout(function(){o&&console.log("Trigger : loadeddata"),p._trigger($.jPlayer.event.loadeddata)},0)}).bind($.jPlayer.event.progress,function(n){e(n),t(n)}).bind($.jPlayer.event.timeupdate,function(n){e(n),t(n)}).bind($.jPlayer.event.play,function(){setTimeout(function(){o&&console.log("Trigger : playing"),p._trigger($.jPlayer.event.playing)},0)}),o&&console.log("Created CUSTOM event handlers for FLASH")},T=function(){!function(t){l=t("#"+f.id),"string"==typeof f.src?(h=c(f.src),m[h]=f.src,v.supplied=h,v.solution=r):u(f.src)&&(m=u(f.src.media)?f.src.media:{},v=u(f.src.options)?f.src.options:{},v.solution=v.solution||r,v.supplied=v.supplied||d(f.src.media)),v.swfPath=v.swfPath||i,l.bind(t.jPlayer.event.ready,function(e){e.jPlayer.flash.used&&j(),t(this).jPlayer("setMedia",m).jPlayer("load")});var n=t.jPlayer.reservedEvent+" loadeddata durationchange",a=n.split(/\s+/g),s=function(e){l.bind(t.jPlayer.event[e],function(t){o&&console.log("Dispatched event: "+e+(t&&t.jPlayer?" ("+t.jPlayer.status.currentTime+"s)":"")),f.dispatchEvent(e)}),o&&console.log("Created event handler for: "+e)};for(var b in t.jPlayer.event)if(t.jPlayer.event.hasOwnProperty(b)){var x=!0;for(var $ in a)if(a.hasOwnProperty($)&&a[$]===b){x=!1;break}x?s(b):o&&console.log("Skipped auto event handler creation for: "+b)}l.bind(t.jPlayer.event.loadeddata,function(e){o&&console.log("Dispatched event: loadeddata"+(e&&e.jPlayer?" ("+e.jPlayer.status.currentTime+"s)":"")),f.dispatchEvent("loadeddata"),g=!0}),o&&console.log("Created CUSTOM event handler for: loadeddata"),l.bind(t.jPlayer.event.durationchange,function(e){y=e.jPlayer.status.duration,C()}),o&&console.log("Created CUSTOM event handler for: durationchange"),l.bind(t.jPlayer.event.error,function(e){w=e.jPlayer.error,w.code=w.type===t.jPlayer.error.URL?4:0,o&&console.log("Dispatched event: error"),o&&console.dir(w),f.dispatchEvent("error")}),o&&console.log("Created CUSTOM event handler for: error"),e.player.defineProperty(f,"error",{set:function(){return w},get:function(){return w}}),e.player.defineProperty(f,"currentTime",{set:function(e){return p.status.paused?l.jPlayer("pause",e):l.jPlayer("play",e),e},get:function(){return p.status.currentTime}}),e.player.defineProperty(f,"duration",{set:function(){return g?y:0/0},get:function(){return g?y:0/0}}),e.player.defineProperty(f,"muted",{set:function(e){return l.jPlayer("mute",e),p.options.muted},get:function(){return p.options.muted}}),e.player.defineProperty(f,"volume",{set:function(e){return l.jPlayer("volume",e),p.options.volume},get:function(){return p.options.volume}}),e.player.defineProperty(f,"paused",{set:function(){return p.status.paused},get:function(){return p.status.paused}}),f.play=function(){l.jPlayer("play")},f.pause=function(){l.jPlayer("pause")},l.jPlayer(v),p=l.data("jPlayer")}(jQuery)},k=function(){jQuery.jPlayer?T():s?setTimeout(k,250):(s=!0,e.getScript(n,function(){s=!1,T()}))},_=function(){window.jQuery?k():a?setTimeout(_,250):(a=!0,e.getScript(t,function(){a=!1,k()}))};_()},_teardown:function(){jQuery("#"+this.id).jPlayer("destroy")}})}(Popcorn);